{"version":3,"sources":["webpack:///./src/pages/ghmark.js","webpack:///./src/utils/createHashSource.js","webpack:///./src/components/app.js"],"names":["App","react__WEBPACK_IMPORTED_MODULE_9___default","a","createElement","_components_app__WEBPACK_IMPORTED_MODULE_11__","GhMarkApp","GithubQueryer","_ref","userId","accessToken","this","query","_callee","response","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_6___default","wrap","_context","prev","next","fetch","method","headers","Content-Type","Accept","Authorization","body","JSON","stringify","sent","abrupt","json","stop","queryStaredRepoCount","_callee2","_context2","data","user","starredRepositories","totalCount","getAllStarredRepo","_callee3","starredRepos","BATCH_SIZE","cursor","i","repos","_context3","queryRepos","push","apply","length","_callee4","size","startCursor","afterField","_context4","edges","map","_ref2","node","Object","assign","owner","login","primaryLanguage","name","languages","nodes","_ref3","RepoList","styled","ul","withConfig","displayName","componentId","RepoItem","li","RepoLink","RepoDescription","p","Tag","span","PaginatedRepoList","props","_this","_React$Component","call","state","page","pageSize","onPreviousPage","bind","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_3___default","onNextPage","componentWillReceiveProps","nextProps","setState","renderRepo","repo","key","id","href","url","target","rel","nameWithOwner","description","l","render","_this$state","repoCount","startIndex","endIndexOnPage","isLastPage","endIndex","Math","min","visibleRepos","slice","onClick","React","Component","_this2","_React$Component2","loggedIn","credential","getDefaultCredential","filterLanguage","filteredRepos","handleFilterLanguageChange","handleCredentialInputChange","handleSubmit","handleLogout","load","parse","window","localStorage","getItem","loadGithubData","_callee5","queryer","_context5","filterRepoByLanguage","componentDidMount","save","value","setItem","delete","removeItem","event","preventDefault","_Object$assign","_event$target","language","filter","_ref4","some","toLowerCase","includes","renderLogin","onSubmit","type","onChange","renderList","Fragment","replaceHashPath","path","hashIndex","location","indexOf","console","log","replace","getState","pathname","substring","search","createHashSource","resolveInitialState","addEventListener","fn","removeEventListener","history","pushState","stateObj","_","uri","hash","replaceState","isBrower","createHistory","renderDynamic","renderStatic","react_default","es","children"],"mappings":"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","file":"component---src-pages-ghmark-js-9db38101a8bc39c41fe9.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport Spa from '../components/app'\n\nconst App = () => (\n  <Spa>\n    <GhMarkApp />\n  </Spa>\n)\nexport default App\n\nclass GithubQueryer {\n  constructor({ userId, accessToken }) {\n    this.userId = userId\n    this.accessToken = accessToken\n  }\n\n  async query(query) {\n    const response = await fetch('https://api.github.com/graphql', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        Authorization: `bearer ${this.accessToken}`,\n      },\n      body: JSON.stringify({ query }),\n    })\n    return response.json()\n  }\n\n  async queryStaredRepoCount() {\n    const response = await this.query(`{\n      user(login: \"${this.userId}\") {\n        starredRepositories(first: 2) {\n          totalCount\n        }\n      }\n    }`)\n    return response.data.user.starredRepositories.totalCount\n  }\n\n  async getAllStarredRepo() {\n    const totalCount = await this.queryStaredRepoCount()\n    const starredRepos = []\n    const BATCH_SIZE = 100\n    let cursor = null\n    for (let i = 0; i <= totalCount / BATCH_SIZE; i++) {\n      const repos = await this.queryRepos(BATCH_SIZE, cursor)\n      starredRepos.push(...repos)\n      cursor = repos[repos.length - 1].cursor\n    }\n    return starredRepos\n  }\n\n  async queryRepos(size, startCursor) {\n    const afterField = startCursor === null ? '' : `after: \"${startCursor}\",`\n    const response = await this.query(`{\n      user(login: \"${this.userId}\") {\n        starredRepositories(first: ${size}, ${afterField} orderBy: {field: STARRED_AT, direction: DESC}) {\n          edges {\n            cursor\n            node {\n              id\n              name\n              description\n              nameWithOwner\n              owner {\n                login\n              }\n              url\n              primaryLanguage {\n                name\n              }\n              languages(first: 20) {\n                nodes {\n                  name\n                }\n              }  \n            }\n          }\n        }\n      }\n    }`)\n    return response.data.user.starredRepositories.edges.map(\n      ({ node, cursor }) => ({\n        ...node,\n        owner: node.owner.login,\n        primaryLanguage: node.primaryLanguage ? node.primaryLanguage.name : '',\n        languages: node.languages.nodes.map(({ name }) => name),\n        cursor,\n      })\n    )\n  }\n}\n\nconst RepoList = styled.ul`\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n`\n\nconst RepoItem = styled.li`\n  margin: 10px;\n  padding: 10px;\n  background-color: #f0f0f0;\n  border-radius: 4px;\n`\n\nconst RepoLink = styled.a``\n\nconst RepoDescription = styled.p``\n\nconst Tag = styled.span`\n  display: inline-block;\n  font: 0.8em sans-serif;\n  color: black;\n  border: 1px solid gray;\n  border-radius: 3px;\n  padding: 2px 4px;\n  margin: 2px 4px;\n  box-shadow: 1px 2px 3px;\n`\n\nclass PaginatedRepoList extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      page: 0,\n      pageSize: 10,\n    }\n    this.onPreviousPage = this.onPreviousPage.bind(this)\n    this.onNextPage = this.onNextPage.bind(this)\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(this.props.repos !== nextProps.repos) {\n      this.setState({\n        page: 0,\n      })\n    }\n  }\n\n  renderRepo(repo) {\n    return (\n      <RepoItem key={repo.id}>\n        <RepoLink href={repo.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          {repo.nameWithOwner}\n        </RepoLink>\n        <RepoDescription>{repo.description}</RepoDescription>\n        {repo.languages.map(l => (\n          <Tag key={l}>{l}</Tag>\n        ))}\n      </RepoItem>\n    )\n  }\n\n  onPreviousPage() {\n    this.setState({\n      page: this.state.page-1\n    })\n  }\n\n  onNextPage() {\n    this.setState({\n      page: this.state.page+1\n    })\n  }\n  \n  render() {\n    const {page, pageSize} = this.state\n    const repoCount = this.props.repos.length\n    const startIndex = page * pageSize\n    const endIndexOnPage = (page + 1) * pageSize\n    const isLastPage = endIndexOnPage >= repoCount\n    const endIndex = Math.min(endIndexOnPage, repoCount)\n    const visibleRepos = this.props.repos.slice(startIndex, endIndex)\n    return (\n      <div>\n        <RepoList>{visibleRepos.map(this.renderRepo)}</RepoList>\n        {this.state.page === 0 ? null : <button onClick={this.onPreviousPage}>⏪</button>}\n        <span>Page {this.state.page + 1}</span>\n        {isLastPage ? null : <button onClick={this.onNextPage}>⏩</button>}\n      </div>\n    )\n  }\n}\n\nclass GhMarkApp extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loggedIn: false,\n      credential: this.getDefaultCredential(),\n      starredRepositories: [],\n      filterLanguage: '',\n      filteredRepos: [],\n      pageSize: 10,\n      page: 1,\n    }\n    this.handleFilterLanguageChange = this.handleFilterLanguageChange.bind(this)\n    this.handleCredentialInputChange = this.handleCredentialInputChange.bind(\n      this\n    )\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.handleLogout = this.handleLogout.bind(this)\n  }\n\n  getDefaultCredential() {\n    return {\n      userId: '',\n      accessToken: '',\n    }\n  }\n\n  load(key) {\n    return JSON.parse(window.localStorage.getItem(key))\n  }\n\n  async loadGithubData(credential) {\n    const queryer = new GithubQueryer(credential)\n    const starredRepositories = await queryer.getAllStarredRepo()\n    const filteredRepos = this.filterRepoByLanguage(\n      starredRepositories,\n      this.state.filterLanguage\n    )\n    this.setState({\n      starredRepositories,\n      filteredRepos,\n    })\n  }\n\n  componentDidMount() {\n    const credential = this.load('credential')\n    if (credential !== null) {\n      this.setState({ credential, loggedIn: true })\n      this.loadGithubData(credential)\n    }\n  }\n\n  save(key, value) {\n    window.localStorage.setItem(key, JSON.stringify(value))\n  }\n\n  delete(key) {\n    window.localStorage.removeItem(key)\n  }\n\n  handleSubmit(event) {\n    event.preventDefault()\n    const credential = this.state.credential\n    this.save('credential', credential)\n    this.setState({\n      loggedIn: true,\n    })\n    this.loadGithubData(credential)\n  }\n\n  handleCredentialInputChange(event) {\n    const { name, value } = event.target\n    const credential = {\n      ...this.state.credential,\n      [name]: value,\n    }\n    this.setState({ credential })\n  }\n\n  handleFilterLanguageChange(event) {\n    const filterLanguage = event.target.value\n    const filteredRepos = this.filterRepoByLanguage(\n      this.state.starredRepositories,\n      filterLanguage\n    )\n\n    this.setState({\n      filterLanguage,\n      filteredRepos,\n    })\n  }\n\n  filterRepoByLanguage(repos, language) {\n    return repos.filter(\n      ({ languages }) =>\n        language === '' ||\n        languages.some(l => l.toLowerCase().includes(language.toLowerCase()))\n    )\n  }\n\n  renderLogin() {\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          User ID:\n          <input\n            name=\"userId\"\n            type=\"text\"\n            value={this.state.credential.userId}\n            onChange={this.handleCredentialInputChange}\n          />\n        </label>\n        <label>\n          Access Token:\n          <input\n            name=\"accessToken\"\n            type=\"password\"\n            value={this.state.credential.accessToken}\n            onChange={this.handleCredentialInputChange}\n          />\n        </label>\n        <input type=\"submit\" value=\"submit\" />\n      </form>\n    )\n  }\n\n  handleLogout() {\n    this.delete('credential')\n    this.setState({\n      credential: this.getDefaultCredential(),\n      loggedIn: false,\n    })\n  }\n\n  renderRepo(repo) {\n    return (\n      <RepoItem key={repo.id}>\n        <RepoLink href={repo.url} target=\"_blank\" rel=\"noopener noreferrer\">\n          {repo.nameWithOwner}\n        </RepoLink>\n        <RepoDescription>{repo.description}</RepoDescription>\n        {repo.languages.map(l => (\n          <Tag key={l}>{l}</Tag>\n        ))}\n      </RepoItem>\n    )\n  }\n\n  renderList() {\n    return (\n      <>\n        <h1>Starred Repositories ({this.state.filteredRepos.length})</h1>\n        <button onClick={this.handleLogout}>Log out</button>\n        <label>\n          Filter By Language:\n          <input\n            name=\"filterLanguage\"\n            type=\"text\"\n            value={this.state.filterLanguage}\n            onChange={this.handleFilterLanguageChange}\n          />\n        </label>\n        <PaginatedRepoList repos={this.state.filteredRepos} />\n      </>\n    )\n  }\n\n  render() {\n    return this.state.loggedIn ? this.renderList() : this.renderLogin()\n  }\n}\n","// implementation take from [hash-source](https://github.com/will-stone/hash-source/blob/master/src/createHashSource.ts)\n\nconst getHashPath = () => {\n  const href = window.location.href\n  const hashIndex = href.indexOf('#')\n  return hashIndex === -1 ? '' : href.substring(hashIndex + 1)\n}\n\nconst pushHashPath = path => (window.location.hash = path)\n\nconst replaceHashPath = path => {\n  const hashIndex = window.location.href.indexOf('#')\n  console.log(window.location.href.slice(0, hashIndex >= 0 ? hashIndex : 0))\n  window.location.replace(\n    window.location.href.slice(0, hashIndex >= 0 ? hashIndex : 0) + '#' + path\n  )\n}\n\nconst getState = path => {\n  const pathname = path ? path : getHashPath()\n  return { pathname, search: '' }\n}\n\nconst resolveInitialState = state => {\n  if (state.pathname === '') {\n    replaceHashPath('/')\n  }\n}\n\nexport const createHashSource = () => {\n  let state = getState()\n\n  resolveInitialState(state)\n\n  return {\n    get location() {\n      return getState()\n    },\n    addEventListener(name, fn) {\n      window.addEventListener(name, fn)\n    },\n    removeEventListener(name, fn) {\n      window.removeEventListener(name, fn)\n    },\n    history: {\n      state,\n      pushState(stateObj, _, uri) {\n        state = getState(uri)\n        pushHashPath(uri)\n      },\n      replaceState(stateObj, _, uri) {\n        state = getState(uri)\n        replaceHashPath(uri)\n      },\n    },\n  }\n}\n\nexport const isBrower = () => typeof window !== 'undefined'\n","import React from 'react'\nimport { createHistory, LocationProvider } from '@reach/router'\nimport { createHashSource, isBrower } from '../utils/createHashSource'\n\n// App container with support for hash router\n// This is based on example of [Hash Source] using @reach/router\n// https://github.com/will-stone/hash-source/blob/master/README.md\n// References:\n// [Gatsby Simple Auth Example](https://github.com/gatsbyjs/gatsby/blob/master/examples/simple-auth/src/pages/app.js)\n// The example uses client normal routing which needs server redirection to support user visiting the client route directly\n// https://www.gatsbyjs.org/docs/authentication-tutorial/#creating-client-only-routes\n// [@reach/router createHistory()](https://reach.tech/router/api/createHistory)\n// [@reach/router createMemoryStore()](https://github.com/reach/router/blob/master/src/lib/history.js)\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    if (isBrower()) {\n      this.history = createHistory(createHashSource())\n    }\n    console.log(\"app is initialized\")\n  }\n\n  render() {\n    return isBrower() ? this.renderDynamic() : this.renderStatic()\n  }\n\n  renderDynamic() {\n    return (\n      <LocationProvider history={this.history}>\n        {this.props.children}\n      </LocationProvider>\n    )\n  }\n\n  renderStatic() {\n    return <h1>This app will only be rendered in browser.</h1>\n  }\n}\n\nexport default App\n"],"sourceRoot":""}